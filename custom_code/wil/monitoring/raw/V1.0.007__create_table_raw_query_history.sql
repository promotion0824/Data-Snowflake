-- ------------------------------------------------------------------------------------------------------------------------------
-- Create raw query history table
-- ------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE IF NOT EXISTS central_monitoring_db.raw.query_history (
    account_name 						TEXT,
	query_id							TEXT,
	query_text							TEXT,
	database_id							NUMBER,
	database_name						TEXT,
	schema_id							NUMBER,
	schema_name							TEXT,
	query_type							TEXT,
	session_id							NUMBER,
	user_name							TEXT,
	role_name							TEXT,
	warehouse_id						NUMBER,
	warehouse_name						TEXT,
	warehouse_size						TEXT,
	warehouse_type						TEXT,
	cluster_number						TEXT,
	query_tag							TEXT,
	execution_status					TEXT,
	error_code							TEXT,
	error_message						TEXT,
	start_time							TIMESTAMP_TZ,
	end_time							TIMESTAMP_TZ,
	total_elapsed_time					NUMBER,
	bytes_scanned						NUMBER,
	percentage_scanned_from_cache		NUMBER,
	bytes_written						NUMBER,
	bytes_written_to_result				NUMBER,
	bytes_read_from_result				NUMBER,
	rows_produced						NUMBER,
	rows_inserted						NUMBER,
	rows_updated						NUMBER,
	rows_deleted						NUMBER,
	rows_unloaded						NUMBER,
	bytes_deleted						NUMBER,
	partitions_scanned					NUMBER,
	partitions_total					NUMBER,
	bytes_spilled_to_local_storage		NUMBER,
	bytes_spilled_to_remote_storage		NUMBER,
	bytes_sent_over_the_network			NUMBER,
	compilation_time					NUMBER,
	execution_time						NUMBER,
	queued_provisioning_time			NUMBER,
	queued_repair_time					NUMBER,
	queued_overload_time				NUMBER,
	transaction_blocked_time			NUMBER,
	outbound_data_transfer_cloud		TEXT,
	outbound_data_transfer_region		TEXT,
	outbound_data_transfer_bytes		NUMBER,
	inbound_data_transfer_cloud			TEXT,
	inbound_data_transfer_region		TEXT,
	inbound_data_transfer_bytes			NUMBER,
	list_external_files_time			NUMBER,
	credits_used_cloud_services			NUMBER,
	release_version						TEXT,
	external_function_total_invocations	NUMBER,
	external_function_total_sent_rows	NUMBER,
	external_function_total_received_rows NUMBER,
	external_function_total_sent_bytes	NUMBER,
	external_function_total_received_bytes NUMBER,
	query_load_percent					NUMBER,
	is_client_generated_statement		BOOLEAN,
    _exported_at 						TIMESTAMP_LTZ,
	_loader_run_id    					VARCHAR(36)
);
